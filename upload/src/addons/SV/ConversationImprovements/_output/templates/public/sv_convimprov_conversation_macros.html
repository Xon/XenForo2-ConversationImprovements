<xf:macro name="search_constraints"
	arg-conversation="!">

	<xf:if is="{$conversation}">
		<xf:page option="searchConstraints" value="{{ {
			phrase('conversations'): {'search_type': 'conversation_message'},
			phrase('sv_convimprov_this_conversation'): {'search_type': 'conversation_message', 'c': {'conversation': $conversation.conversation_id}}
		} }}" />
	<xf:else />
		<xf:page option="searchConstraints" value="{{ {
			phrase('conversations'): {'search_type': 'conversation_message'}
		} }}" />
	</xf:if>
</xf:macro>

<xf:macro name="message_last_edit" arg-message="!">
	<xf:if is="$message.last_edit_date">
		<div class="message-lastEdit">
			<xf:if is="$message.user_id == $message.last_edit_user_id">
				{{ phrase('last_edited:') }} <xf:date time="{$message.last_edit_date}" itemprop="dateModified" />
			<xf:else />
				{{ phrase('last_edited_by_moderator:') }} <xf:date time="{$message.last_edit_date}" itemprop="dateModified" />
			</xf:if>
		</div>
	</xf:if>
</xf:macro>